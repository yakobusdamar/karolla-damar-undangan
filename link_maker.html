<!doctype html>
<html lang="id">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Link Maker — Kepada</title>
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
      body { padding-top: 1.5rem; background-color: #f8f9fa; }
      .card { border-radius: 12px; }
      .output-input { font-family: monospace; }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-12 col-sm-10 col-md-8 col-lg-6">
          <div class="card shadow-sm">
            <div class="card-body">
              <h5 class="card-title mb-3">Link Undangan Maker</h5>
              <p class="text-muted small">Masukkan nama penerima di kolom <strong>Kepada</strong>. Sistem akan membuat link otomatis berdasarkan format undangan.</p>

              <form id="makerForm" autocomplete="off">
                <div class="mb-3">
                  <label for="kepada" class="form-label">Kepada</label>
                  <input type="text" class="form-control" id="kepada" placeholder="contoh: Mbak Prisca & Kel." />
                  <div id="helpText" class="form-text">Teks akan otomatis diubah jadi format URL yang aman.</div>
                </div>

                <div class="d-grid gap-2 d-sm-flex justify-content-sm-start">
                  <button type="button" id="generateBtn" class="btn btn-primary">Buat Link</button>
                  <button type="button" id="resetBtn" class="btn btn-outline-secondary">Reset</button>
                </div>
              </form>

              <hr />

              <div class="mb-2">
                <label for="output" class="form-label">Hasil Link</label>
                <div class="input-group">
                  <input type="text" id="output" class="form-control output-input" readonly aria-label="Hasil link" />
                  <button class="btn btn-outline-secondary" id="copyBtn" type="button">Copy Link</button>
                </div>
                <div class="form-text mt-1">Klik link untuk membuka di tab baru.</div>
              </div>

              <div class="mt-3 text-end">
                <small class="text-muted">Made simple • Mobile optimized • Bootstrap</small>
              </div>
            </div>
          </div>

          <div class="text-center mt-3 text-muted small">Format: <code>https://yakobusdamar.github.io/karolla-damar-undangan/code-test.html?to=Nama%20Penerima</code></div>
        </div>
      </div>
    </div>

    <script>
      (function(){
        const baseUrl = 'https://yakobusdamar.github.io/karolla-damar-undangan/code-test.html?to=';
        const kepada = document.getElementById('kepada');
        const output = document.getElementById('output');
        const generateBtn = document.getElementById('generateBtn');
        const copyBtn = document.getElementById('copyBtn');
        const resetBtn = document.getElementById('resetBtn');

        function buildLink(name) {
          if (!name) return '';
          return baseUrl + encodeURIComponent(name.trim());
        }

        function updateOutput() {
          const val = kepada.value;
          const link = buildLink(val);
          output.value = link;
        }

        // Live update
        kepada.addEventListener('input', updateOutput);

        // Generate button
        generateBtn.addEventListener('click', function(){
          updateOutput();
          output.focus();
          output.select();
        });

        // Copy to clipboard
        copyBtn.addEventListener('click', async function(){
          if (!output.value) return;
          try {
            await navigator.clipboard.writeText(output.value);
            copyBtn.innerText = 'Copied!';
            setTimeout(()=> copyBtn.innerText = 'Copy Link', 1300);
          } catch (e) {
            output.select();
            document.execCommand('copy');
            copyBtn.innerText = 'Copied!';
            setTimeout(()=> copyBtn.innerText = 'Copy Link', 1300);
          }
        });

        // Reset
        resetBtn.addEventListener('click', function(){
          kepada.value = '';
          updateOutput();
        });

        // Klik Enter untuk langsung buka
        output.addEventListener('keydown', function(e){
          if (e.key === 'Enter' && output.value) {
            window.open(output.value, '_blank', 'noopener');
          }
        });

        updateOutput();
      })();
    </script>
  </body>
</html>

